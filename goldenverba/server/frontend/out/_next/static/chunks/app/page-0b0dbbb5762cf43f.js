(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{87094:function(e,t,s){Promise.resolve().then(s.bind(s,38763))},38763:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eI}});var l=s(57437),n=s(2265),r=s(58177),a=s(30505),o=s(8603),i=s(14063),c=s(97223),d=e=>{let{Icon:t,iconSize:s,title:n,currentPage:r,setPage:a,setCurrentPage:o,APIHost:i,hide:c}=e;return(0,l.jsxs)("button",{disabled:null===i,className:"btn md:btn-sm lg:btn-md ".concat(c?"hidden":"flex"," flex-grow items-center justify-center border-none hover:bg-button-hover-verba ").concat(r===a?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{o(a)},children:[(0,l.jsx)(t,{size:s}),(0,l.jsx)("p",{className:"md:text-xs lg:text-sm sm:hidden md:flex",children:n})]},n)};async function x(){try{let e=await fetch("https://api.github.com/repos/weaviate/verba",{method:"GET"}),t=await e.json();if(t)return t.stargazers_count;return 0}catch(e){return console.error("Failed to perform search:",e),0}}let g=e=>e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString();var u=e=>{let{imageSrc:t,title:s,subtitle:u,APIHost:b,version:m,currentPage:h,setCurrentPage:f,production:p,handleViewChange:v}=e,[j,N]=(0,n.useState)("0");(0,n.useEffect)(()=>{(async()=>{try{let e=await x();if(e){let t=g(e);N(t)}}catch(e){console.error("Failed to fetch GitHub stars:",e)}})()},[]);let y=()=>{window.open("https://github.com/weaviate/verba","_blank","noopener,noreferrer")};return(0,l.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,l.jsx)("img",{src:t,width:80,className:"flex"}),(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-center lg:gap-3",children:[(0,l.jsx)("p",{className:"sm:text-2xl md:text-3xl text-text-verba",children:s}),(0,l.jsx)("p",{className:"sm:text-sm text-base text-text-alt-verba font-light",children:u})]})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,l.jsx)("div",{className:"hidden sm:h-[3vh] lg:h-[5vh] bg-text-alt-verba w-px sm:mx-2 md:mx-4"}),(0,l.jsxs)("div",{className:"lg:flex hidden lg:flex-row items-center lg:gap-3 justify-between",children:[(0,l.jsx)("div",{className:" ".concat(p?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,l.jsx)(d,{hide:!1,APIHost:b,Icon:r.utr,iconSize:18,title:"Chat",currentPage:h,setCurrentPage:f,setPage:"CHAT"}),(0,l.jsx)(d,{hide:p,APIHost:b,Icon:o.Lgw,iconSize:18,title:"Import Data",currentPage:h,setCurrentPage:f,setPage:"ADD"}),(0,l.jsx)(d,{hide:!1,APIHost:b,Icon:r.emU,iconSize:18,title:"Documents",currentPage:h,setCurrentPage:f,setPage:"DOCUMENTS"}),(0,l.jsx)("div",{className:" ".concat(p?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,l.jsx)(d,{hide:p,APIHost:b,Icon:r.LTV,iconSize:18,title:"RAG Config",currentPage:h,setCurrentPage:f,setPage:"RAG"}),(0,l.jsx)(d,{hide:p,APIHost:b,Icon:r.zfW,iconSize:18,title:"App Settings",currentPage:h,setCurrentPage:f,setPage:"SETTINGS"}),(0,l.jsx)(d,{hide:p,APIHost:b,Icon:a.lLR,iconSize:18,title:"Admin",currentPage:h,setCurrentPage:f,setPage:"STATUS"}),(0,l.jsx)("div",{className:"sm:h-[3vh] lg:h-[5vh] mx-1 hidden sm:block bg-text-alt-verba w-px"}),(0,l.jsxs)("button",{className:"md:hidden btn md:btn-sm lg:btn-md lg:flex items-center justify-center border-none bg-secondary-verba hover:bg-button-hover-verba",onClick:y,children:[(0,l.jsx)(i.hJX,{size:18,className:"text-text-verba"}),(0,l.jsx)("p",{className:"text-xs sm:hidden md:flex text-text-verba ",children:j})]}),(0,l.jsx)("p",{className:"hidden lg:flex text-xs text-text-alt-verba",children:m})]}),(0,l.jsx)("div",{className:"flex flex-row items-center sm:gap-1 lg:gap-5 justify-between",children:(0,l.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,l.jsx)("ul",{className:"menu md:menu-md sm:menu-sm sm:menu-horizontal bg-base-200 rounded-box hover:bg-button-hover-verba bg-button-verba z-50",children:(0,l.jsx)("li",{children:(0,l.jsxs)("details",{children:[(0,l.jsx)("summary",{children:(0,l.jsx)(c.bqP,{size:20})}),(0,l.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,l.jsx)("li",{onClick:e=>{f("CHAT")},children:(0,l.jsx)("a",{children:"Chat"})}),(0,l.jsx)("li",{onClick:e=>{f("DOCUMENTS")},children:(0,l.jsx)("a",{children:"Documents"})}),!p&&(0,l.jsx)("li",{onClick:e=>{f("STATUS")},children:(0,l.jsx)("a",{children:"Status"})}),!p&&(0,l.jsx)("li",{onClick:e=>{f("ADD")},children:(0,l.jsx)("a",{children:"Add Documents"})}),!p&&(0,l.jsx)("li",{onClick:e=>{f("RAG")},children:(0,l.jsx)("a",{children:"RAG"})}),!p&&(0,l.jsx)("li",{onClick:e=>{f("SETTINGS")},children:(0,l.jsx)("a",{children:"Settings"})}),(0,l.jsx)("li",{onClick:y,children:(0,l.jsx)("a",{children:"GitHub"})}),(0,l.jsx)("li",{className:"items-center justify-center text-xs text-text-alt-verba mt-2",children:m})]})]})})})})})]})]})};let b=["Inter","Plus_Jakarta_Sans","Open_Sans","PT_Mono"],m={value:"Plus_Jakarta_Sans",type:"select",options:b,description:"Text Font"},h={title:"Chat Settings",description:"Customize chat settings like caching generated answers in Weaviate or let Weaviate give you autocomplete suggestions.",settings:{caching:{checked:!0,type:"check",description:"Enable Caching"},suggestion:{checked:!0,type:"check",description:"Enable Autocompletion"},info_button:{checked:!0,type:"check",description:"Enable Help Information"},max_document_size:{value:1e4,type:"number",description:"Max characters to show Documents"}}},f={Default:{Customization:{title:"Customization",description:"Customize the layout of your Verba by changing the title, subtitle, logo, and colors of the app.",settings:{title:{text:"Verba",type:"text",description:"Title of the Page"},subtitle:{text:"The Golden RAGtriever",type:"text",description:"Subtitle of the Page"},intro_message:{text:"Welcome to Verba, your open-source RAG application!",type:"text",description:"Intro Message"},placeholder_message:{text:"Ask Verba anything!",type:"text",description:"Input Placeholder"},image:{src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true",type:"image",description:"Logo of the Page"},primary_color:{color:"#FDFF91",type:"color",description:"Primary Color"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary Color"},warning_color:{color:"#FF8399",type:"color",description:"Accent Color"},bg_color:{color:"#FEF7F7",type:"color",description:"Background Color"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alternative Background Color"},text_color:{color:"#161616",type:"color",description:"Text Color"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alternative Text Color"},button_color:{color:"#EFEFEF",type:"color",description:"Button Color"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:m,theme:"light"}},Chat:h},DarkMode:{Customization:{title:"Customization",description:"Customize the layout of your Verba by changing the title, subtitle, logo, and colors of the app.",settings:{title:{text:"Verba",type:"text",description:"Title of the Page"},subtitle:{text:"The Dark RAGtriever",type:"text",description:"Subtitle of the Page"},intro_message:{text:"Welcome to the dark mode version of Verba! Spooky, right?",type:"text",description:"Intro Message"},placeholder_message:{text:"Ask anything!",type:"text",description:"Input Placeholder"},image:{src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true",type:"image",description:"Logo of the Page"},primary_color:{color:"#BB86FC",type:"color",description:"Primary Color"},secondary_color:{color:"#008F82",type:"color",description:"Secondary Color"},warning_color:{color:"#FF8399",type:"color",description:"Accent Color"},bg_color:{color:"#202020",type:"color",description:"Background Color"},bg_alt_color:{color:"#2F2929",type:"color",description:"Alternative Background Color"},text_color:{color:"#ffffff",type:"color",description:"Text Color"},text_alt_color:{color:"#999999",type:"color",description:"Alternative Text Color"},button_color:{color:"#3C3C3C",type:"color",description:"Button Color"},button_hover_color:{color:"#2C2C2C",type:"color",description:"Button Hover Color"},bg_console:{color:"#2F2929",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:{value:"Open_Sans",type:"select",options:b,description:"Text Font"},theme:"dark"}},Chat:h},Weaviate:{Customization:{title:"Customization",description:"Customize the layout of your Verba by changing the title, subtitle, logo, and colors of the app.",settings:{title:{text:"Weaviate Verba",type:"text",description:"Title of the Page"},subtitle:{text:"Chatbot for Weaviate",type:"text",description:"Subtitle of the Page"},intro_message:{text:"Welcome to Weaviate, your AI-Native vector database. How can I help you with Weaviate today?",type:"text",description:"Intro Message"},placeholder_message:{text:"Ask all questions related to Weaviate",type:"text",description:"Input Placeholder"},image:{src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true",type:"image",description:"Logo of the Page"},primary_color:{color:"#6BDF4A",type:"color",description:"Primary Color"},secondary_color:{color:"#7AD6EB",type:"color",description:"Secondary Color"},warning_color:{color:"#F4404E",type:"color",description:"Accent Color"},bg_color:{color:"#EDEDED",type:"color",description:"Background Color"},bg_alt_color:{color:"#ffffff",type:"color",description:"Alternative Background Color"},text_color:{color:"#130C49",type:"color",description:"Text Color"},text_alt_color:{color:"#8196A6",type:"color",description:"Alternative Text Color"},button_color:{color:"#E6E3E3",type:"color",description:"Button Color"},button_hover_color:{color:"#FFFFFF",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:{value:"Inter",type:"select",options:b,description:"Text Font"},theme:"light"}},Chat:h},SanaMaxima:{Customization:{title:"Customization",description:"Customize the layout of your Verba by changing the title, subtitle, logo, and colors of the app.",settings:{title:{text:"Prinses Maxima Centrum",type:"text",description:"Title of the Page"},subtitle:{text:"Medical RAG",type:"text",description:"Subtitle of the Page"},intro_message:{text:"Welcome to Medical Retrieval Augmented Generation! We ingested medical data, like clinical reports, research and more to improve access to healthcare. Try it out by asking questions related to diseases, symptoms and medical conditions.",type:"text",description:"Intro Message"},placeholder_message:{text:"Ask a medical question",type:"text",description:"Input Placeholder"},image:{src:"https://www.prinsesmaximacentrum.nl/img/logo/prinses-maxima-centrum-logo-en.svg",type:"image",description:"Logo of the Page"},primary_color:{color:"#FF963F",type:"color",description:"Primary Color"},secondary_color:{color:"#53E797",type:"color",description:"Secondary Color"},warning_color:{color:"#F11F78",type:"color",description:"Accent Color"},bg_color:{color:"#F1F1F1",type:"color",description:"Background Color"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alternative Background Color"},text_color:{color:"#000F1D",type:"color",description:"Text Color"},text_alt_color:{color:"#818181",type:"color",description:"Alternative Text Color"},button_color:{color:"#E4E4E4",type:"color",description:"Button Color"},button_hover_color:{color:"#CCCCCC",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:{value:"Open_Sans",type:"select",options:b,description:"Text Font"},theme:"light"}},Chat:h},Custom:{Customization:{title:"Customization",description:"Customize the layout of your Verba by changing the title, subtitle, logo, and colors of the app.",settings:{title:{text:"My RAG",type:"text",description:"Title of the Page"},subtitle:{text:"Powered by Weaviate",type:"text",description:"Subtitle of the Page"},intro_message:{text:"Welcome to Verba, your open-source RAG application!",type:"text",description:"Intro Message"},placeholder_message:{text:"Ask Verba anything!",type:"text",description:"Input Placeholder"},image:{src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true",type:"image",description:"Logo of the Page"},primary_color:{color:"#FDFF91",type:"color",description:"Primary Color"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary Color"},warning_color:{color:"#FF8399",type:"color",description:"Accent Color"},bg_color:{color:"#FEF7F7",type:"color",description:"Background Color"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alternative Background Color"},text_color:{color:"#161616",type:"color",description:"Text Color"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alternative Text Color"},button_color:{color:"#EFEFEF",type:"color",description:"Button Color"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:m,theme:"light"}},Chat:h}};var p=s(65125),v=e=>{let{title:t,TextFieldSetting:s,setting:n,settingsConfig:r,setSettingsConfig:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow",placeholder:t,value:r[n].settings[t].text,onChange:e=>{let s=e.target.value;a(e=>{let l=JSON.parse(JSON.stringify(e));return l[n].settings[t].text=s,l})}})})})]},t)},j=e=>{let{title:t,ImageFieldSetting:s,setting:n,settingsConfig:r,setSettingsConfig:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col justify-center gap-1",children:[(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"flex justify-center items-center mt-4",children:(0,l.jsx)("img",{src:r[n].settings[t].src,alt:"Logo",className:"max-w-xs max-h-32 rounded-xl"})}),(0,l.jsxs)("div",{className:"flex justify-center items-center mt-1",children:[(0,l.jsx)("button",{onClick:()=>{var e;return null===(e=document.getElementById("LogoImageInput"))||void 0===e?void 0:e.click()},className:"btn border-none text-xs bg-bg-verba text-text-alt-verba",children:"Add Logo"}),(0,l.jsx)("input",{id:"LogoImageInput",type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let s=new FileReader;s.onload=e=>{a(s=>{var l;let r=JSON.parse(JSON.stringify(s));return r[n].settings[t].src=null===(l=e.target)||void 0===l?void 0:l.result,r})},s.readAsDataURL(e.target.files[0])}},className:"hidden"})]})]})})]},t)},N=s(73478),y=e=>{let{title:t,ColorSetting:s,setting:n,settingsConfig:r,setSettingsConfig:a}=e,o=e=>{a(s=>{let l=JSON.parse(JSON.stringify(s));return l[n].settings[t].color=e,l})};return(0,l.jsxs)("div",{className:"flex flex-col justify-center gap-1",children:[(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex gap-2 justify-center items-center",children:(0,l.jsxs)("div",{className:"flex flex-col gap-1 h-[15vh]",children:[(0,l.jsx)("label",{className:"input bg-bg-verba input-sm input-bordered flex items-center gap-2 w-full",children:(0,l.jsx)("input",{type:"text",className:"grow",placeholder:t,value:r[n].settings[t].color,onChange:e=>{o(e.target.value)}})}),(0,l.jsx)(N.gW,{color:r[n].settings[t].color,onChange:e=>{o(e)}})]})})]},t)},w=e=>{let{title:t,SelectSetting:s,setting:n,settingsConfig:r,setSettingsConfig:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("select",{value:r[n].settings[t].value,onChange:e=>{let s=e.target.value;a(e=>{let l=JSON.parse(JSON.stringify(e));return l[n].settings[t].value=s,l})},className:"select bg-bg-verba",children:s.options.map(e=>(0,l.jsx)("option",{children:e},"Select_"+e))})})]},t)},C=e=>{let{title:t,CheckboxSetting:s,setting:n,settingsConfig:r,setSettingsConfig:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("input",{type:"checkbox",className:"toggle",checked:r[n].settings[t].checked,onChange:e=>{let s=e.target.checked;a(e=>{let l=JSON.parse(JSON.stringify(e));return l[n].settings[t].checked=s,l})}})})]},t)},S=e=>{let{title:t,NumberFieldSetting:s,setting:n,settingsConfig:r,setSettingsConfig:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"number",className:"grow",placeholder:t,value:r[n].settings[t].value,onChange:e=>{let s=e.target.value;a(e=>{let l=JSON.parse(JSON.stringify(e));return l[n].settings[t].value=s,l})}})})})]},t)},_=e=>{let{Icon:t,iconSize:s,title:n,currentSetting:r,setSetting:a,setSettingString:o}=e;return(0,l.jsxs)("button",{className:"btn lg:btn-lg flex items-center justify-center border-none hover:bg-button-hover-verba ".concat(r===o?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{a(o)},children:[(0,l.jsx)(t,{size:s}),(0,l.jsx)("p",{className:"sm:hidden md:flex md:text-base lg:text-lg",children:n})]},n)},E=e=>{let{settingTemplate:t,setSettingTemplate:s,baseSetting:a,setBaseSetting:o}=e,[d,x]=(0,n.useState)("Customization"),[g,u]=(0,n.useState)(JSON.parse(JSON.stringify(a[t]))),[b,m]=(0,n.useState)(Object.keys(f));(0,n.useEffect)(()=>{m(Object.keys(f)),u(JSON.parse(JSON.stringify(a[t])))},[a,t]);let h=(e,t)=>{if(""===d)return null;switch(t.type){case"text":return(0,l.jsx)(v,{title:e,setting:d,TextFieldSetting:t,settingsConfig:g,setSettingsConfig:u});case"image":return(0,l.jsx)(j,{title:e,setting:d,ImageFieldSetting:t,settingsConfig:g,setSettingsConfig:u});case"check":return(0,l.jsx)(C,{title:e,setting:d,CheckboxSetting:t,settingsConfig:g,setSettingsConfig:u});case"select":return(0,l.jsx)(w,{title:e,setting:d,SelectSetting:t,settingsConfig:g,setSettingsConfig:u});case"color":return(0,l.jsx)(y,{title:e,setting:d,ColorSetting:t,settingsConfig:g,setSettingsConfig:u});case"number":return(0,l.jsx)(S,{title:e,setting:d,NumberFieldSetting:t,settingsConfig:g,setSettingsConfig:u});default:return null}};return(0,l.jsxs)("div",{className:"flex justify-between items-start gap-5",children:[(0,l.jsxs)("div",{className:"hidden lg:flex lg:flex-col gap-5 lg:w-1/4",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center gap-5",children:[(0,l.jsx)("p",{className:"md:text-base lg:text-lg text-text-alt-verba",children:"Settings"}),(0,l.jsxs)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-5 rounded-lg shadow-lg gap-2",children:[(0,l.jsx)(_,{Icon:i._TT,iconSize:20,title:"Customize Verba",currentSetting:d,setSetting:x,setSettingString:"Customization"}),(0,l.jsx)(_,{Icon:r.utr,iconSize:20,title:"Chat Settings",currentSetting:d,setSetting:x,setSettingString:"Chat"})]})]}),""!=d&&(0,l.jsxs)("div",{className:"sm:hidden md:flex flex-col justify-center items-center gap-5",children:[(0,l.jsx)("p",{className:" md:text-base lg:text-lg text-text-alt-verba",children:"Description"}),(0,l.jsx)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-5 rounded-lg shadow-lg gap-2",children:(0,l.jsxs)("p",{className:"sm:text-xs md:text-sm lg:text-base",children:[" ",f[t][d]?f[t][d].description:""]})})]})]}),(0,l.jsxs)("div",{className:"flex flex-col lg:justify-center justify-start lg:items-center items-start gap-5 w-full lg:w-3/4",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center w-full",children:[(0,l.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,l.jsx)("ul",{className:"menu menu-sm sm:menu-horizontal bg-base-200 rounded-box bg-bg-alt-verba z-40",children:(0,l.jsx)("li",{children:(0,l.jsxs)("details",{children:[(0,l.jsxs)("summary",{children:[(0,l.jsx)(c.bqP,{size:15})," Settings"]}),(0,l.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,l.jsx)("li",{onClick:()=>{x("Customization")},children:(0,l.jsx)("a",{children:"Customize Verba"})}),(0,l.jsx)("li",{onClick:()=>{x("Chat")},children:(0,l.jsx)("a",{children:"Chat Settings"})})]})]})})})}),(0,l.jsx)("p",{className:"sm:hidden md:flex text-lg text-text-alt-verba",children:"Configuration"}),(0,l.jsx)("select",{value:t,onChange:e=>{s(e.target.value)},className:"select select-md lg:select-sm text-xs bg-bg-alt-verba text-text-verba",children:b.map(e=>(0,l.jsx)("option",{children:e},"Template"+e))})]}),(0,l.jsxs)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-10 rounded-lg shadow-lg h-[70vh] gap-2 overflow-y-scroll",children:[(0,l.jsx)("p",{className:"font-bold text-2xl lg:mb-5",children:d}),""!=d&&(0,l.jsxs)("div",{className:"lg:hidden flex flex-col items-start gap-5 mb-5",children:[(0,l.jsx)("p",{className:" md:text-base lg:text-lg text-text-alt-verba",children:"Description"}),(0,l.jsx)("div",{className:"flex flex-col w-full gap-2",children:(0,l.jsxs)("p",{className:"sm:text-xs md:text-sm lg:text-base",children:[" ",f[t][d]?f[t][d].description:""]})})]}),(0,l.jsx)("div",{className:" flex-coll gap-4 grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:d&&Object.entries(f[t][d].settings).map(e=>{let[t,s]=e;return h(t,s)})}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,l.jsxs)("button",{onClick:()=>{o(e=>{let s=JSON.parse(JSON.stringify(e));return s[t]=g,s})},className:"btn flex items-center justify-center border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba",children:[(0,l.jsx)(i.FJM,{}),(0,l.jsx)("p",{className:"",children:"Apply"})]}),(0,l.jsxs)("button",{onClick:()=>{u(JSON.parse(JSON.stringify(a[t])))},className:"btn flex items-center justify-center border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,l.jsx)(p.B4e,{}),(0,l.jsx)("p",{className:"",children:"Reset"})]})]})]})]})]})},k=s(15560),I=s.n(k);let O=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/generate_stream")};var D=s(13921),F=s(7395),A=s(38666),R=e=>{let{message:t,handleCopyToBillboard:s,settingConfig:n}=e;return(0,l.jsxs)("div",{className:"flex items-end gap-2 ".concat("user"===t.type?"justify-end":"justify-start"),children:[(0,l.jsxs)("div",{className:"flex flex-col items-start p-4 rounded-xl animate-press-in shadow-md sm:text-sm md:text-base ".concat("user"===t.type?"bg-primary-verba":"bg-bg-verba"),children:[t.cached&&(0,l.jsx)(i.i1q,{size:12,className:"text-text-verba"}),"system"===t.type?(0,l.jsx)(D.D,{className:"prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:r,children:a,...o}=e,i=/language-(\w+)/.exec(r||"");return!s&&i?(0,l.jsx)(F.Z,{style:"dark"===n.Customization.settings.theme?A.vk:A.Yn,language:i[1],PreTag:"div",...o,children:String(a).replace(/\n$/,"")}):(0,l.jsx)("code",{className:r,...o,children:a})}},children:t.content}):(0,l.jsx)("div",{className:"whitespace-pre-wrap",children:t.content})]}),(0,l.jsx)("div",{className:"flex flex-col items-center justify-center",children:"system"===t.type&&(0,l.jsx)("button",{onClick:()=>s(t.content),className:"btn border-none shadow-none flex gap-1 bg-bg-alt-verba hover:bg-secondary-verba hover:text-text-verba text-text-alt-verba",children:(0,l.jsx)("p",{className:"text-xs",children:"Copy"})})})]})},T=s(61379),z=e=>{let{status:t,true_text:s,false_text:n}=e;return(0,l.jsx)("div",{className:"p-2 rounded-lg text-text-verba text-sm ".concat(t?"bg-secondary-verba":"bg-bg-alt-verba text-text-alt-verba"),children:(0,l.jsx)("p",{className:"text-xs ".concat(t?"text-text-verba":"text-text-alt-verba"),children:t?s:n})})},P=e=>{let{component_name:t,Icon:s,changeTo:n,changePage:r,disable:a}=e;return(0,l.jsxs)("button",{disabled:a,onClick:()=>r(n),className:"btn btn-sm w-full border-none p-2 rounded-lg text-text-verba text-sm bg-button-verba hover:bg-primary-verba }",children:[(0,l.jsx)("div",{className:"hidden md:flex",children:(0,l.jsx)(s,{size:15})}),(0,l.jsx)("p",{className:'text-xs "text-text-verba',children:t})]})},M=e=>{let{APIHost:t,settingConfig:s,setChunks:r,setChunkTime:a,setCurrentPage:i,setContext:c,production:d,RAGConfig:x}=e,[g,u]=(0,n.useState)(""),b=(0,n.useRef)(null),[m,h]=(0,n.useState)(null),[f,p]=(0,n.useState)(""),[v,j]=(0,n.useState)([]),N=(0,n.useRef)(!1),[y,w]=(0,n.useState)("DONE"),[C,S]=(0,n.useState)(!1),[_,E]=(0,n.useState)([]),[k,D]=(0,n.useState)(!1),[F,A]=(0,n.useState)(""),[M,L]=(0,n.useState)("GOOD"),J=e=>{navigator.clipboard.writeText(e).then(function(){B("Copied message")},function(e){console.error("Unable to copy text: ",e)})},B=(e,t)=>{if(t?L("BAD"):L("GOOD"),k){A(e);return}A(e),D(!0),setTimeout(()=>{D(!1),A("")},3e3)};(0,n.useEffect)(()=>{j(H("VERBA_CONVERSATION")),r(X("VERBA_CHUNKS")),c(K("VERBA_CONTEXT"));let e=O(),t=new WebSocket(e);return t.onopen=()=>{console.log("WebSocket connection opened to "+e),B("WebSocket Online")},t.onmessage=e=>{let t;if(!N.current){u("");return}try{t=JSON.parse(e.data)}catch(t){console.error("Received data is not valid JSON:",e.data);return}let s=t.message;if(u(e=>e+s),"stop"===t.finish_reason){N.current=!1,w("DONE");let e=t.full_text;if(t.cached){let s=t.distance;j(t=>[...t,{type:"system",content:e,cached:!0,distance:s}])}else j(t=>[...t,{type:"system",content:e}]);u("")}},t.onerror=e=>{console.error("WebSocket Error:",e),B("WebSocket Error: "+e,!0),N.current=!1,w("DONE")},t.onclose=e=>{e.wasClean?console.log("WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),B("WebSocket Connection Offline",!0),N.current=!1,w("DONE")},h(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[]),(0,n.useEffect)(()=>{v.length>1&&U("VERBA_CONVERSATION",v),b.current&&(v[v.length-1],b.current.scrollIntoView({behavior:"smooth"}))},[v]);let G=async e=>{p(e),E([])},V=(e,t)=>{if((null==m?void 0:m.readyState)===WebSocket.OPEN){let s=JSON.stringify({query:e,context:t,conversation:v});m.send(s)}else console.error("WebSocket is not open. ReadyState:",null==m?void 0:m.readyState)},U=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},W=(e,t)=>{localStorage.setItem(e,t)},H=e=>{{let t=localStorage.getItem(e);if(t&&JSON.parse(t).length>0)return JSON.parse(t)}return[{type:"system",content:s.Customization.settings.intro_message.text}]},q=e=>{localStorage.removeItem(e)},Y=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},X=e=>{try{{let t=localStorage.getItem(e);if(t&&JSON.parse(t).length>0)return JSON.parse(t)}}catch(e){console.error("Failed to load chunks from local storage:",e)}return[]},K=e=>{try{{let t=localStorage.getItem(e);if(t)return t}}catch(e){console.error("Failed to load context from local storage:",e)}return""},Z=e=>{localStorage.removeItem(e)},$=async e=>{if(null==e||e.preventDefault(),E([]),null===t){B("No connection to server");return}if(!N.current&&f.trim()){j(e=>[...e,{type:"user",content:f}]),p("");let e=document.getElementById("reset");null!==e?(e.style.height="",e.style.width=""):console.error('The element with ID "target" was not found in the DOM.');try{N.current=!0,w("CHUNKS");let e=await fetch(t+"/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:f})}),s=await e.json();if(s){if(""!==s.error){B(s.error,!0),N.current=!1,w("DONE");return}r(s.chunks),Y("VERBA_CHUNKS",s.chunks),E([]),a(s.took),s.context&&(V(f,s.context),c(s.context),W("VERBA_CONTEXT",s.context),w("RESPONSE"))}else B("Failed to fetch from API: No data received",!0),N.current=!1,w("DONE")}catch(e){console.error("Failed to fetch from API:",e),B("Failed to fetch from API: "+e,!0),N.current=!1,w("DONE")}}},Q=async e=>{if(C||""===e||N.current||!s.Chat.settings.suggestion.checked){E([]);return}try{S(!0);let s=await fetch(t+"/api/suggestions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}),l=await s.json();l&&E(l.suggestions),S(!1)}catch(e){console.error("Failed to fetch suggestions:",e),S(!1)}},ee=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),et=(e,t)=>{let s=ee(t),n=e.split(RegExp("(".concat(s,")"),"gi"));return(0,l.jsx)("div",{className:"flex flex-row gap-1",children:n.map((e,s)=>(0,l.jsx)("p",{className:e.toLowerCase()===t.toLowerCase()?"font-bold text-sm":"",children:e},s))})};return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-2 md:p-5 text-text-verba gap-5 h-[55vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex gap-1 md:gap-2 items-center",children:[x&&(0,l.jsx)("div",{className:"flex gap-2 items-center",children:(0,l.jsx)(P,{disable:d,component_name:x?x.Generator.selected:"",Icon:T.VB9,changeTo:"RAG",changePage:i})}),(0,l.jsx)("div",{className:"hidden sm:block md:h-[3vh] lg:h-[2vh] bg-text-alt-verba w-px mx-0 md:mx-1"}),(0,l.jsx)(z,{status:null!==t&&null!==m&&m.readyState===WebSocket.OPEN,true_text:"Online",false_text:"Connecting..."}),(0,l.jsx)(z,{status:s.Chat.settings.caching.checked,true_text:"Caching",false_text:"No Caching"}),(0,l.jsx)(z,{status:s.Chat.settings.suggestion.checked,true_text:"Suggestions",false_text:"No Suggestions"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[v.map((e,t)=>(0,l.jsx)("div",{ref:t===v.length-1?b:null,className:"mb-4 ".concat("user"===e.type?"text-right":""),children:(0,l.jsx)(R,{message:e,handleCopyToBillboard:J,settingConfig:s})},t)),g&&(0,l.jsx)(R,{settingConfig:s,message:{type:"system",content:g,cached:!1},handleCopyToBillboard:J})]}),N.current&&(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center pl-4 mb-4 gap-3",children:[(0,l.jsx)(I(),{color:s.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsxs)("p",{children:["CHUNKS"===y&&"Retrieving chunks","RESPONSE"===y&&"Generating answer"]})]}),(0,l.jsx)("div",{className:"items-center justify-center flex",children:(0,l.jsx)("button",{onClick:()=>{B("Canceled Generation",!0),u(""),N.current=!1,w("DONE")},className:"btn btn-sm text-sm bg-button-verba hover:bg-button-hover-verba text-text-verba",children:"Cancel"})})]})]}),(0,l.jsx)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-5 min-h-[9.3vh]",children:(0,l.jsxs)("form",{className:"flex justify-between w-full items-center gap-3",onSubmit:$,children:[(0,l.jsx)("textarea",{id:"reset",rows:1,cols:10,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),$(e))},value:f,onChange:e=>{p(e.target.value),Q(e.target.value)},className:" bg-bg-alt-verba textarea textarea-xs p-2 text-sm md:text-base w-full",placeholder:"Ask ".concat(s.Customization.settings.title.text," anything")}),(0,l.jsx)("button",{type:"submit",className:"btn btn-circle border-none shadow-none bg-bg-alt-verba hover:bg-secondary-verba",children:(0,l.jsx)(o.ghy,{size:18})}),(0,l.jsx)("div",{className:"tooltip text-text-verba","data-tip":"Reset Conversation",children:(0,l.jsx)("button",{type:"button",onClick:()=>{q("VERBA_CONVERSATION"),Z("VERBA_CHUNKS"),Z("VERBA_CONTEXT"),r([]),j([{type:"system",content:s.Customization.settings.intro_message.text}]),p(""),E([]),c("")},className:"btn btn-circle border-none shadow-none bg-bg-alt-verba hover:bg-secondary-verba",children:(0,l.jsx)(o.oRX,{size:18})})})]})}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:_.map((e,t)=>(0,l.jsx)("button",{className:"btn sm:btn-sm md:btn-md border:none bg-button-verba hover:bg-button-hover-verba text-sm font-normal",onClick:()=>G(e),children:et(e,f)},t+e))}),(0,l.jsx)("div",{className:"animate-pop-in ".concat(k?"opacity-100":"opacity-0"," ").concat("GOOD"===M?"bg-secondary-verba":"bg-warning-verba"," text-text-verba p-3 rounded text-sm transition-opacity"),children:(0,l.jsx)("p",{children:F})})]})},L=s(77095),J=e=>{let{title:t,modal_id:s,text:n,triggerAccept:r,triggerString:a,triggerValue:o}=e;return(0,l.jsx)("dialog",{id:s,className:"modal",children:(0,l.jsxs)("div",{className:"modal-box",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:t}),(0,l.jsx)("p",{className:"whitespace-pre-wrap",children:n}),(0,l.jsx)("div",{className:"modal-action",children:(0,l.jsxs)("form",{method:"dialog",children:[r&&a&&(0,l.jsx)("button",{className:"btn text-text-verba bg-primary-verba border-none hover:bg-button-hover-verba",onClick:()=>{r(o)},children:a}),(0,l.jsx)("button",{className:"btn text-text-verba bg-warning-verba border-none hover:bg-button-hover-verba ml-2",children:"Cancel"})]})})]})})},B=e=>{let{chunks:t,selectedChunk:s,chunkTime:a,context:o,setSelectedChunk:c,setCurrentPage:d,RAGConfig:x,production:g}=e;return(0,n.useEffect)(()=>{t&&t.length>0?c(t[0]):c(null)},[t]),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-3 md:h-[17vh] lg:h-[65vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex md:flex-col gap-5",children:[(0,l.jsx)("div",{className:"flex md:flex-row lg:flex-col gap-2 justify-center md:justify-start items-center",children:x&&(0,l.jsxs)("div",{className:"flex flex-row lg:flex-col gap-2 items-center lg:w-full",children:[(0,l.jsx)(P,{disable:g,component_name:x?x.Embedder.selected:"",Icon:i.i1q,changeTo:"RAG",changePage:d}),(0,l.jsx)(P,{disable:g,component_name:x?x.Retriever.selected:"",Icon:i.U41,changeTo:"RAG",changePage:d})]})}),t&&t.length>0&&(0,l.jsx)("div",{className:"sm:hidden md:flex items-center justify-center",children:(0,l.jsxs)("p",{className:"items-center justify-center text-text-alt-verba text-xs",children:[t.length," chunks retrieved in ",a," seconds."]})})]}),(0,l.jsxs)("div",{className:"flex sm:flex-row lg:flex-col gap-2",children:[t&&t.map((e,t)=>(0,l.jsxs)("button",{onClick:()=>c(e),className:"btn md:btn-base bg-button-verba hover:bg-button-hover-verba border-none lg:btn-lg sm:w-2/3 md:w-1/3 lg:w-full flex justify-start items-center gap-5 ".concat((null==s?void 0:s.chunk_id)===e.chunk_id&&s.doc_uuid===e.doc_uuid?"bg-secondary-verba":"bg-button-verba"," hover:button-hover-verba"),children:[(0,l.jsx)("div",{className:"tooltip text-xs","data-tip":"Score: ".concat(Math.round(100*e.score)),children:(0,l.jsx)("button",{className:"btn btn-xs border-none text-xs btn-circle lg:btn-sm bg-bg-alt-verba hover:bg-primary-verba flex md:text-sm lg:text-base",children:(0,l.jsx)(L.ZP,{end:t+1,className:"text-sm text-text-verba"})})}),(0,l.jsxs)("div",{className:"flex flex-col items-start truncate sm:w-1/2",children:[(0,l.jsx)("p",{className:"text-xs lg:text-sm text-text-verba",children:e.doc_name}),(0,l.jsx)("p",{className:"text-xs text-text-alt-verba",children:e.doc_type})]})]},e.doc_name+t)),""!==o&&(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("context_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn flex gap-2 w-full border-none bg-button-verba text-text-verba hover:bg-button-hover-verba",children:[(0,l.jsx)(r.UTX,{className:"text-text-verba"}),(0,l.jsx)("p",{className:"text-text-verba text-xs",children:"See Context"})]})]})]}),(0,l.jsx)(J,{modal_id:"context_modal",title:"Context Used",text:o})]})},G=e=>{let{tooltip_text:t,display_text:s,settingConfig:n}=e;return(0,l.jsxs)("div",{className:"items-center gap-2 ".concat(n.Chat.settings.info_button.checked?"flex":"hidden"),children:[(0,l.jsx)("div",{className:"tooltip tooltip-right text-xs","data-tip":t,children:(0,l.jsx)("button",{className:"btn btn-circle btn-sm border-none bg-bg-verba hover:bg-secondary-verba text-text-verba",children:(0,l.jsx)(i.LL$,{})})}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba",children:s})]})},V=s(44287),U=s.n(V),W=s(13184),H=s.n(W),q=s(81364),Y=s.n(q),X=s(26840),K=s.n(X);let Z={Inter:U(),Plus_Jakarta_Sans:H(),Open_Sans:Y(),PT_Mono:K()};var $=e=>{let{APIHost:t,settingConfig:s,setCurrentPage:r,RAGConfig:a,production:o}=e,[i,c]=(0,n.useState)([]),[d,x]=(0,n.useState)(""),[g,u]=(0,n.useState)(0),[b,m]=(0,n.useState)(null);return(0,l.jsxs)("div",{className:"flex sm:flex-col md:flex-row justify-between items-start md:gap-3 ",children:[(0,l.jsxs)("div",{className:"sm:w-full md:w-1/2 lg:w-2/6 flex flex-col gap-2",children:[(0,l.jsx)(G,{settingConfig:s,tooltip_text:"Use the Chat Interface to interact with your data. Your query will be used to retrieve relevant information and to construct a response. You can choose between different Large Language Models (LLM) to create a response.",display_text:"Chat Interface"}),(0,l.jsx)(M,{setContext:x,production:o,RAGConfig:a,settingConfig:s,APIHost:t,setChunks:c,setChunkTime:u,setCurrentPage:r})]}),(0,l.jsxs)("div",{className:"flex lg:flex-row sm:flex-col justify-between items-start sm:w-full md:w-1/2 lg:w-4/6 gap-3",children:[(0,l.jsxs)("div",{className:"sm:w-full lg:w-1/4 flex flex-col gap-2",children:[(0,l.jsx)(G,{settingConfig:s,tooltip_text:"Use the Chunk Interface to browse through relevant chunks of your data, based on your last query. You can choose between different embeddings and retrieval techniques.",display_text:"Relevant Context"}),(0,l.jsx)(B,{context:d,production:o,chunks:i,RAGConfig:a,selectedChunk:b,setSelectedChunk:m,chunkTime:g,setCurrentPage:r})]}),(0,l.jsx)("div",{className:"sm:w-full lg:w-3/4 flex flex-col gap-2",children:(0,l.jsx)(G,{settingConfig:s,tooltip_text:"Use the Document Viewer to inspect your data and extracts of context that were used to generate responses to your queries. You can switch between showing the whole document and only showing the specific extract.",display_text:"Document Viewer"})})]})]})},Q=e=>{let{APIHost:t,selectedDocument:s,settingConfig:r,setSelectedDocument:a,production:o}=e,[c,d]=(0,n.useState)(""),[x,g]=(0,n.useState)(1),[u,b]=(0,n.useState)([]),[m,h]=(0,n.useState)(0),[f,v]=(0,n.useState)([]),[j,N]=(0,n.useState)([]),[y,w]=(0,n.useState)(null),[C,S]=(0,n.useState)(!1),[_,E]=(0,n.useState)(!1),k=async e=>{try{E(!0);let s=await fetch(t+"/api/get_all_documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e||"",labels:j,page:x,pageSize:20})}),l=await s.json();l&&(""!==l.error?(console.error(l.error),E(!1),b(null)):(b(l.documents),v(l.labels),h(l.took),E(!1)))}catch(e){console.error("Failed to fetch document:",e),E(!1)}};(0,n.useEffect)(()=>{S(!0)},[]),(0,n.useEffect)(()=>{null!=t?k(c):(b(null),E(!1))},[x,C]);let I=()=>{k(c)},O=async e=>{!o&&await fetch(t+"/api/delete_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e})})&&(e==s&&a(null),k(c))},D=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-start w-[8vw]",children:(0,l.jsx)(G,{settingConfig:r,tooltip_text:"Search and inspect different documents imported into Verba",display_text:"Search"})}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),I())},placeholder:"Search for documents",value:c,onChange:e=>{d(e.target.value)}})}),(0,l.jsx)("button",{type:"button",onClick:I,className:"btn btn-square border-none bg-primary-verba hover:bg-button-hover-verba",children:(0,l.jsx)(i.U41,{size:15})}),(0,l.jsx)("button",{type:"button",onClick:()=>{d(""),k("")},className:"btn btn-square border-none bg-button-verba hover:bg-button-hover-verba",children:(0,l.jsx)(p.Ffb,{size:18})})]}),(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:[_&&(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,l.jsx)("span",{className:"loading loading-spinner loading-sm"}),(0,l.jsx)("p",{className:"text-text-alt-verba",children:"Loading Documents"})]}),u&&u.map((e,t)=>(0,l.jsxs)("div",{className:"flex justify-between items-center gap-2 rounded-2xl p-1 w-full",children:[(0,l.jsx)("button",{onClick:()=>a(e.uuid),className:"flex ".concat(s&&s===e.uuid?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg transition-colors duration-300 ease-in-out border-none"),children:(0,l.jsx)("p",{className:"text-text-verba",children:e.title})},e.title+t),(0,l.jsx)("div",{className:"flex justify-end items-center",children:(0,l.jsx)("button",{onClick:()=>{D("remove_document"+e.uuid)},className:"btn btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba",children:(0,l.jsx)(i.Xm5,{size:15})})}),(0,l.jsx)(J,{modal_id:"remove_document"+e.uuid,title:"Remove Document",text:"Do you want to remove "+e.title+"?",triggerString:"Delete",triggerValue:e.uuid,triggerAccept:O})]},"Document"+t+e.title))]}),(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-center h-min w-full",children:(0,l.jsx)("div",{className:"flex gap-3 items-center justify-center",children:(0,l.jsxs)("div",{className:"join justify-center items-center text-text-verba",children:[x>1&&(0,l.jsx)("button",{onClick:()=>{u&&(1==x?g(1):g(e=>e-1))},className:"join-item btn btn-sqare border-none bg-button-verba hover:bg-secondary-verba",children:"\xab"}),(0,l.jsxs)("button",{className:"join-item btn border-none bg-button-verba hover:bg-secondary-verba",children:["Page ",x]}),u&&u.length>=20&&(0,l.jsx)("button",{onClick:()=>{u&&(u.length<20?g(1):g(e=>e+1))},className:"join-item btn btn-square border-none bg-button-verba hover:bg-secondary-verba",children:"\xbb"})]})})})]})},ee=s(33149),et=s(68842),es=s(26547);(0,et.e)({OrbitControls:es.z});var el=()=>(0,l.jsxs)(ee.Xz,{children:[(0,l.jsx)(es.z,{}),(0,l.jsxs)("mesh",{position:[1,2,3],"rotation-x":.5,children:[(0,l.jsx)("boxGeometry",{}),(0,l.jsx)("meshBasicMaterial",{color:"red"})]})]}),en=s(25847),er=e=>{let t,{document:s,settingConfig:n}=e;return s?(0,l.jsxs)("div",{className:"flex flex-col gap-2 text-start items-start justify-start",children:[(0,l.jsxs)("div",{className:"flex gap-4 w-full justify-between",children:[(0,l.jsx)("p",{className:"text-lg font-bold",children:s.title}),(0,l.jsx)("div",{className:"gap-2 grid grid-cols-3",children:Object.entries(s.labels).map(e=>{let[t,n]=e;return(0,l.jsx)("div",{className:"flex bg-bg-verba min-w-[8vw] p-2 text-sm text-text-verba justify-center text-center items-center rounded-xl",children:(0,l.jsx)("p",{children:n})},s.title+t+n)})})]}),(0,l.jsx)("div",{className:"divider"}),(0,l.jsx)("div",{className:"flex gap-2 max-w-[70vw]",children:(t=s.content,s.extension,(0,l.jsx)(D.D,{className:"max-w-[50vw] items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:r,children:a,...o}=e,i=/language-(\w+)/.exec(r||"");return!s&&i?(0,l.jsx)(F.Z,{style:"dark"===n.Customization.settings.theme?A.vk:A.Yn,language:i[1],PreTag:"div",...o,children:String(a).replace(/\n$/,"")}):(0,l.jsx)("code",{className:r,...o,children:a})}},children:t}))})]}):(0,l.jsx)("div",{})},ea=e=>{let{APIHost:t,selectedDocument:s,settingConfig:r,setSelectedDocument:a,production:o}=e,[c,d]=(0,n.useState)("Content"),[x,g]=(0,n.useState)(!1),[u,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{s?m():b(null)},[s]);let m=async()=>{try{g(!0);let e=await fetch(t+"/api/get_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:s})}),l=await e.json();l&&(""!==l.error?(console.error(l.error),g(!1),b(null),a(null)):(b(l.document),g(!1)))}catch(e){console.error("Failed to fetch document:",e),g(!1)}};return s?(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,l.jsx)(G,{settingConfig:r,tooltip_text:"Inspect your all information about your document, such as chunks, metadata and more.",display_text:u?u.title:"Loading..."})}),(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,l.jsxs)("button",{onClick:()=>{d("Content")},className:"flex ".concat("Content"===c?"bg-primary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-button-hover-verba"," border-none btn text-text-verba gap-2"),children:[(0,l.jsx)(p.Vqr,{size:15}),(0,l.jsx)("p",{children:"Content"})]}),(0,l.jsxs)("button",{onClick:()=>{d("Chunks")},className:"flex ".concat("Chunks"===c?"bg-primary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-button-hover-verba"," border-none btn text-text-verba gap-2"),children:[(0,l.jsx)(p.Fqs,{size:15}),(0,l.jsx)("p",{children:"Chunks"})]}),(0,l.jsxs)("button",{onClick:()=>{d("Vector Space")},className:"flex ".concat("Vector Space"===c?"bg-primary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-button-hover-verba"," border-none btn text-text-verba gap-2"),children:[(0,l.jsx)(en.FUn,{size:15}),(0,l.jsx)("p",{children:"Vector Space"})]}),(0,l.jsx)("button",{onClick:()=>{a(null)},className:"flex btn btn-square border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:(0,l.jsx)(p.B4e,{size:15})})]})]}),(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:[x&&(0,l.jsxs)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2 h-full",children:[(0,l.jsx)("span",{className:"loading loading-spinner loading-sm"}),(0,l.jsx)("p",{children:"Loading Document"})]}),"Content"===c&&(0,l.jsx)(er,{document:u,settingConfig:r}),"Vector Space"===c&&(0,l.jsx)(el,{})]}),(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,l.jsxs)("button",{className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,l.jsx)(i.DAO,{size:15}),(0,l.jsx)("p",{children:"View Source"})]}),(0,l.jsxs)("button",{className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,l.jsx)(i.DAO,{size:15}),(0,l.jsx)("p",{children:"View Metadata"})]}),(0,l.jsxs)("button",{className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,l.jsx)(p.B4e,{size:15}),(0,l.jsx)("p",{children:"Delete"})]})]})})]}):(0,l.jsx)("div",{})},eo=e=>{let{APIHost:t,settingConfig:s,setCurrentPage:r,RAGConfig:a,production:o}=e,[i,c]=(0,n.useState)(null);return(0,l.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,l.jsx)("div",{className:"".concat(i?"hidden lg:flex lg:w-[45vw]":"w-full lg:w-[45vw] lg:flex"),children:(0,l.jsx)(Q,{production:o,APIHost:t,setSelectedDocument:c,settingConfig:s,selectedDocument:i})}),(0,l.jsx)("div",{className:"".concat(i?"lg:w-[55vw] w-full flex":"hidden lg:flex lg:w-[55vw]"),children:(0,l.jsx)(ea,{production:o,APIHost:t,setSelectedDocument:c,settingConfig:s,selectedDocument:i})})]})},ei=e=>{let{title:t,value:s,checked:n}=e;return(0,l.jsx)("div",{className:"flex p-3 rounded-lg ".concat(n?"bg-secondary-verba":"bg-bg-verba"),children:(0,l.jsxs)("div",{className:"flex gap-2 text-text-verba items-center",children:[(0,l.jsx)("p",{children:t}),(0,l.jsx)("div",{className:"text-xs lg:text-sm text-text-verba",children:null!==s?(0,l.jsx)("p",{children:s}):(0,l.jsx)("p",{children:n?"Available":"Not Available"})})]})})},ec=e=>{let{type:t,connected:s,isFetching:n,schemas:r,settingConfig:a,reset_verba:o}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-6 h-[65vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex lg:flex-row flex-col gap-2",children:[(0,l.jsx)("p",{className:"text-text-verba font-bold text-lg",children:"Admin Console"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(z,{status:null!==t,true_text:t||"",false_text:t||""}),(0,l.jsx)(z,{status:"Online"===s,true_text:s,false_text:"Connecting..."})]})]}),n&&(0,l.jsxs)("div",{className:"flex items-center justify-center pl-4 mb-4 gap-3",children:[(0,l.jsx)(I(),{color:a.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Loading Stats"})]}),"Online"===s&&(0,l.jsxs)("div",{className:"gap-2 grid grid-cols-2",children:[(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_verba_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba border-none hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(p.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Reset Verba"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_documents_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba border-none hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(p.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Reset Documents"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_cache_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba border-none hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(p.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Reset Cache"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_suggestions_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba border-none hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(p.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Reset Suggestion"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_config_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba border-none hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(p.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Reset Config"})]})]}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:r&&Object.entries(r).map(e=>{let[t,s]=e;return(0,l.jsx)(ei,{title:t,value:s,checked:!1},t+"SCHEMA")})})]}),(0,l.jsx)(J,{modal_id:"reset_verba_modal",title:"Reset Verba",text:"Do you want to delete all data Verba data?",triggerString:"Reset",triggerValue:"VERBA",triggerAccept:o}),(0,l.jsx)(J,{modal_id:"reset_documents_modal",title:"Reset Documents",text:"Do you want to delete all documents?",triggerString:"Reset",triggerValue:"DOCUMENTS",triggerAccept:o}),(0,l.jsx)(J,{modal_id:"reset_cache_modal",title:"Reset Cache",text:"Do you want to delete all cached data?",triggerString:"Reset",triggerValue:"CACHE",triggerAccept:o}),(0,l.jsx)(J,{modal_id:"reset_suggestions_modal",title:"Reset Suggestions",text:"Do you want to delete all autocompletion suggestions?",triggerString:"Reset",triggerValue:"SUGGESTIONS",triggerAccept:o}),(0,l.jsx)(J,{modal_id:"reset_config_modal",title:"Reset Configuration",text:"Do you want to reset your Verba configuration?",triggerString:"Reset",triggerValue:"CONFIG",triggerAccept:o})]})},ed=e=>{let{title:t,status:s,isFetching:n,settingConfig:r}=e;return(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-6 h-[65vh] overflow-auto",children:[(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsx)("p",{className:"text-text-verba font-bold text-lg",children:t})}),n&&(0,l.jsx)("div",{className:"flex items-center justify-center pl-4 mb-4 gap-3",children:(0,l.jsx)(I(),{color:r.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75})}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:s&&Object.entries(s).map(e=>{let[t,s]=e;return(0,l.jsx)(ei,{title:t,value:null,checked:s},"Status_"+t)})})]})})},ex=e=>{let{APIHost:t,settingConfig:s,fetchHost:r}=e,[a,o]=(0,n.useState)(null),[i,c]=(0,n.useState)("Offline"),[d,x]=(0,n.useState)(null),[g,u]=(0,n.useState)(null),[b,m]=(0,n.useState)(null),[h,f]=(0,n.useState)(!1);(0,n.useEffect)(()=>{null!=t?p():(console.warn("Missing API Host for retrieving status"),c("Offline"),o(null),x(null),u(null),m(null),f(!1))},[]);let p=async()=>{if(t)try{f(!0);let e=await fetch(t+"/api/get_status",{method:"GET"}),s=await e.json();s?(s.error&&console.log(s.error),o(s.type),c("Online"),x(s.libraries),u(s.variables),m(s.schemas),f(!1)):console.warn("Status could not be retrieved")}catch(e){console.error("Failed to fetch document:",e),c("Offline"),o(null),x(null),u(null),m(null),f(!1)}},v=e=>{localStorage.removeItem(e)},j=async e=>{try{o(null),x(null),u(null),m(null),f(!0),v("VERBA_CONVERSATION"),v("VERBA_CHUNKS"),v("VERBA_CONTEXT"),await fetch(t+"/api/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetMode:e})})&&(await r(),await p())}catch(e){console.error("Failed to delete document:",e)}};return(0,l.jsxs)("div",{className:"flex sm:flex-col md:flex-row justify-center items-start gap-3 ",children:[(0,l.jsx)("div",{className:"w-full md:w-1/3",children:(0,l.jsx)(ec,{reset_verba:j,settingConfig:s,type:a,isFetching:h,connected:i,schemas:b})}),(0,l.jsx)("div",{className:"w-full md:w-1/3",children:(0,l.jsx)(ed,{settingConfig:s,title:"Libraries",isFetching:h,status:d})}),(0,l.jsx)("div",{className:"w-full md:w-1/3",children:(0,l.jsx)(ed,{settingConfig:s,title:"Variables",isFetching:h,status:g})})]})},eg=e=>{let{APIHost:t,files:s,settingConfig:r,textValues:a,RAGConfig:o,RAGConfigTitle:c,RAGComponents:d,setRAGConfig:x,setFiles:g,setTextValues:u}=e,[b,m]=(0,n.useState)(a?a[0]:""),h=e=>{x(t=>{let s=JSON.parse(JSON.stringify(t));return s[c].selected=e,s})};return(0,l.jsx)("div",{className:"flex sm:flex-col md:flex-row justify-center items-start gap-3 w-full",children:(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-5 h-[65vh] overflow-auto w-full",children:[(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsxs)("p",{className:"text-lg",children:["Select a ",c]})}),(0,l.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2",children:d&&Object.entries(d.components).map(e=>{let[t,s]=e;return(0,l.jsx)("button",{disabled:!s.available,onClick:()=>{h(t)},className:"btn border-none ".concat(s.available?"flex":"hidden"," ").concat(t===d.selected?"bg-secondary-verba text-text-verba":"bg-button-verba text-text-alt-verba"," hover:bg-button-hover-verba "),children:(0,l.jsx)("p",{children:t})},"Component_"+t)})}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[d&&d.selected&&(0,l.jsxs)("div",{className:"flex lg:flex-row flex-col gap-1",children:[(0,l.jsx)("p",{className:"lg:text-base text-xs",children:"You selected: "}),(0,l.jsx)("p",{className:"font-bold lg:text-base text-sm",children:d.selected})]}),d&&d.selected&&(0,l.jsx)("p",{className:"text-sm text-text-alt-verba",children:d.components[d.selected].description})]}),(0,l.jsx)("div",{className:" flex-col gap-4 grid grid-cols-1 lg:grid-cols-1"}),d.selected&&"UPLOAD"===d.components[d.selected].type&&(0,l.jsxs)("div",{className:"flex lg:flex-row flex-col gap-3",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("button",{onClick:()=>{var e;return null===(e=document.getElementById(c+d.selected+"_upload"))||void 0===e?void 0:e.click()},className:"btn border-none bg-button-verba hover:bg-secondary-verba text-text-verba",children:"Add Files"}),(0,l.jsx)("input",{id:c+d.selected+"_upload",type:"file",value:s?void 0:"",onChange:e=>{e.target.files&&e.target.files[0]&&g(e.target.files)},className:"hidden",multiple:!0})]}),s&&(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)("button",{onClick:()=>{g(null)},className:"btn text-sm border-none bg-warning-verba hover:bg-button-hover-verba ",children:"Clear Files"})})]}),s&&(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("p",{className:"flex text-text-alt-verba text-sm ",children:"Files:"}),(0,l.jsx)("div",{className:"flex flex-col gap-1 overflow-y-auto h-[15vh] border-2 p-2 rounded-lg border-bg-verba",children:s&&Array.from(s).map((e,t)=>(0,l.jsx)("p",{children:e.name},t+e.name))})]})]}),d.selected&&"URL"===d.components[d.selected].type&&(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:a.length>0&&b!==a[0]||""!=b&&a.length<=0?(0,l.jsx)("p",{children:"*Enter URL"}):(0,l.jsx)("p",{children:"Enter URL"})}),(0,l.jsxs)("div",{className:"flex flex-row gap-2 w-full items-center justify-center",children:[(0,l.jsx)("div",{className:"flex flex-col items-center justify-center gap-1 w-full",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow",value:b,onChange:e=>{m(e.target.value)}})})}),(0,l.jsx)("button",{onClick:()=>{u([b])},className:"btn bg-bg-verba border-none hover:bg-secondary-verba",children:(0,l.jsx)(i.l_A,{})})]})]}),(0,l.jsx)("div",{})]})})};let eu=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/import_files")};var eb=e=>{let{APIHost:t,setCurrentPage:s,settingConfig:r,RAGConfig:a,setRAGConfig:o,showComponents:c,buttonTitle:d,baseSetting:x,settingTemplate:g}=e,[u,b]=(0,n.useState)(JSON.parse(JSON.stringify(a))),[m,h]=(0,n.useState)(null),[f,v]=(0,n.useState)([]),[j,N]=(0,n.useState)(!1),[y,w]=(0,n.useState)(!1),[C,S]=(0,n.useState)([]),[_,E]=(0,n.useState)(null);(0,n.useEffect)(()=>{w(!0)},[]);let k=async()=>{if(N(!0),!m&&f.length<=0){N(!1);return}try{D("INFO","Starting Import");let e=m?await Promise.all(Array.from(m).map(e=>new Promise((t,s)=>{let l=new FileReader;l.onload=()=>{let s=function(e){let t="",s=new Uint8Array(e),l=s.byteLength;for(let e=0;e<l;e++)t+=String.fromCharCode(s[e]);return btoa(t)}(l.result),n=e.name;t({filename:n,extension:e.name.split(".").pop()||"",content:s})},l.onerror=()=>s(l.error),l.readAsArrayBuffer(e)}))):[];h(null),e&&((null==_?void 0:_.readyState)===WebSocket.OPEN?_.send(JSON.stringify({config:{RAG:u,SETTING:{selectedTheme:g,themes:x}},data:e,textValues:f})):(console.error("WebSocket is not open. ReadyState:",null==_?void 0:_.readyState),N(!1),D("WARNING","Lost connection to backend, trying to reconnect..."),w(e=>!e)))}catch(e){console.error("Failed to fetch from API:",e),N(!1)}},O=async()=>{if(t){N(!0);try{let e=await fetch(t+"/api/set_config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:{RAG:u,SETTING:{selectedTheme:g,themes:x}}})}),s=await e.json();s&&console.log(s),N(!1)}catch(e){console.error("Failed to fetch from API:",e),N(!1)}}},D=(e,t)=>{let s={type:e,message:t};S(e=>[...e,s])};return(0,l.jsxs)("div",{className:"flex sm:flex-col md:flex-row justify-between gap-3 ",children:[u&&Object.entries(u).map(e=>{let[s,n]=e;return c.includes(s)&&(0,l.jsx)("div",{className:"w-full md:w-1/4",children:(0,l.jsx)(eg,{textValues:f,setTextValues:v,files:m,setFiles:h,settingConfig:r,APIHost:t,RAGConfig:u,RAGConfigTitle:s,RAGComponents:n,setRAGConfig:b},s)},"RAGButton_"+s)}),u?(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4 items-end",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 w-full",children:[(0,l.jsx)("button",{disabled:j,onClick:()=>{o(u),"Import"===d?k():(O(),s("CHAT"))},className:"btn w-1/2 btn-lg text-base flex gap-2 bg-secondary-verba hover:bg-button-hover-verba text-text-verba",children:j?(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(I(),{color:r.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75})})}):(0,l.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[(0,l.jsx)(i.Xur,{}),d,m&&(0,l.jsxs)("p",{className:"text-sm",children:["(",m.length,")"]})]})}),(0,l.jsxs)("button",{disabled:j,onClick:()=>{b(JSON.parse(JSON.stringify(a))),S([]),v([]),h(null)},className:"btn w-1/2 btn-lg text-base text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,l.jsx)(p.B4e,{}),"Clear"]})]}),"Import"===d&&C.length>0&&(0,l.jsx)("div",{className:"bg-bg-console-verba h-[58vh] overflow-auto w-full p-5 flex flex-col gap-1 rounded-lg",children:C&&C.map((e,t)=>(0,l.jsx)("pre",{className:"text-xs font-mono ".concat("INFO"===e.type?"text-text-console-verba":"WARNING"===e.type?"text-primary-verba":"SUCCESS"===e.type?"text-secondary-verba":"ERROR"===e.type?"text-warning-verba":""),children:(0,l.jsxs)("code",{children:["(",e.type,") ",e.message]})},"console_message_"+t))})]}):(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)(I(),{color:r.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Loading Components..."})]})})]})};let em=async()=>{let e=async e=>{try{let t=await fetch(e);if(!t.ok)throw Error("HTTP status ".concat(t.status));return!0}catch(t){return console.error("Failed to fetch from ".concat(e,":"),t),!1}};if(await e("http://localhost:8000/api/health"))return"http://localhost:8000";if(await e("/api/health"))return window.location.origin;throw Error("Both health checks failed, please check the Verba Server")},eh={DONE:"bg-secondary-verba",ERROR:"bg-warning-verba",READY:"bg-button-verba",STARTING:"bg-button-verba",CHUNKING:"bg-button-verba",LOADING:"bg-button-verba",EMBEDDING:"bg-button-verba",INGESTING:"bg-button-verba",NER:"bg-button-verba",EXTRACTION:"bg-button-verba",SUMMARIZING:"bg-button-verba",WAITING:"bg-button-verba"},ef={DONE:"Finished",ERROR:"Failed",READY:"Ready",STARTING:"Importing...",CHUNKING:"Chunking...",LOADING:"Loading...",EMBEDDING:"Embedding...",INGESTING:"Weaviating...",NER:"Extracting NER...",EXTRACTION:"Extraction REL...",SUMMARIZING:"Summarizing...",WAITING:"Waiting..."};var ep=s(71375);let ev=()=>{let e=document.activeElement;e&&e instanceof HTMLElement&&e.blur()};var ej=e=>{var t,s,r;let{fileData:a,fileMap:c,setFileMap:d,handleDeleteFile:x,selectedFileData:g,setSelectedFileData:u}=e,[b,m]=(0,n.useState)(""),[h,f]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{g&&c[g].isURL&&m(c[g].content?c[g].content:"")},[c,g]),(0,l.jsxs)("div",{className:"flex justify-between items-center gap-2 rounded-2xl p-1 w-full",children:["READY"!=c[a.fileID].status?(0,l.jsxs)("button",{className:"min-w-[11vw] flex gap-2 items-center justify-center text-text-verba ".concat(eh[c[a.fileID].status]," hover:bg-button-hover-verba rounded-lg p-3"),children:["DONE"!=c[a.fileID].status&&"ERROR"!=c[a.fileID].status?(0,l.jsx)("span",{className:"loading loading-spinner loading-sm"}):"","DONE"===c[a.fileID].status&&(0,l.jsx)(i.FJM,{size:15}),"ERROR"===c[a.fileID].status&&(0,l.jsx)(p.vVM,{size:15}),(0,l.jsx)("p",{className:"text-sm",children:ef[c[a.fileID].status]})]}):(0,l.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center min-w-[11vw] tooltip tooltip-right","data-tip":c[a.fileID].rag_config.Reader.components[c[a.fileID].rag_config.Reader.selected].description,children:[(0,l.jsxs)("button",{tabIndex:0,role:"button",className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,l.jsx)(ep.WMq,{size:15}),(0,l.jsx)("p",{children:c[a.fileID].rag_config.Reader.selected})]}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:(t=c[a.fileID].rag_config,s=e=>{let t=JSON.parse(JSON.stringify(c[a.fileID])),s=JSON.parse(JSON.stringify(c[a.fileID].rag_config));s.Reader.selected=e,t.rag_config=s;let l={...c};l[a.fileID]=t,d(l),g&&g===c[a.fileID].filename&&u(a.fileID)},r=c[a.fileID].isURL?"URL":"FILE",Object.entries(t.Reader.components).filter(e=>{let[t,s]=e;return s.type===r}).map(e=>{let[t,n]=e;return(0,l.jsx)("li",{onClick:()=>{s(n.name),ev()},children:(0,l.jsx)("a",{children:n.name})},"Dropdown_"+n.name)}))})]}),!c[a.fileID].isURL&&(0,l.jsx)("button",{onClick:()=>{u(a.fileID)},className:"flex ".concat(g&&g===c[a.fileID].fileID?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg transition-colors duration-300 ease-in-out border-none"),children:(0,l.jsx)("p",{className:"text-text-verba",children:c[a.fileID].filename})}),c[a.fileID].isURL&&h&&(0,l.jsx)("div",{className:"flex items-center justify-center gap-2 w-full",children:(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",placeholder:"Enter "+c[a.fileID].rag_config.Reader.selected+" URL here",value:b,onChange:e=>{m(e.target.value)}})})}),c[a.fileID].isURL&&!h&&(0,l.jsx)("button",{onClick:()=>{u(a.fileID)},className:"flex ".concat(g&&g===c[a.fileID].fileID?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg transition-colors duration-300 ease-in-out border-none"),children:(0,l.jsx)("p",{className:"text-text-verba",children:b})}),c[a.fileID].isURL&&(0,l.jsx)("div",{className:"flex justify-end items-center",children:(0,l.jsx)("button",{onClick:()=>{if(h){let e=JSON.parse(JSON.stringify(c[a.fileID]));e.content=b;let t={...c};t[a.fileID]=e,d(t)}f(e=>!e)},className:"btn btn-square border-none bg-button-verba hover:bg-secondary-verba text-text-verba",children:h?(0,l.jsx)(o.jsx,{size:20}):(0,l.jsx)(p.U$P,{size:15})})}),(0,l.jsx)("div",{className:"flex justify-end items-center",children:(0,l.jsx)("button",{onClick:()=>{let e=document.getElementById("remove_file_"+c[a.fileID].filename);e instanceof HTMLDialogElement&&e.showModal()},className:"btn btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba",children:(0,l.jsx)(i.Xm5,{size:15})})}),(0,l.jsx)(J,{modal_id:"remove_file_"+c[a.fileID].filename,title:"Remove File",text:c[a.fileID].isURL?"Do you want to remove the URL?":"Do you want to remove "+c[a.fileID].filename+" from the selection?",triggerString:"Delete",triggerValue:c[a.fileID].fileID,triggerAccept:x})]})},eN=e=>{let{settingConfig:t,fileMap:s,setFileMap:r,RAGConfig:a,setRAGConfig:c,selectedFileData:d,setSelectedFileData:x,importSelected:g,socketStatus:u,reconnect:b,importAll:m}=e,h=n.useRef(null);(0,n.useEffect)(()=>{null!==h.current&&(h.current.setAttribute("directory",""),h.current.setAttribute("webkitdirectory",""))},[h]);let f=e=>{r(t=>{if(null===e)return x(null),{};{e===d&&x(null);let s={...t};return delete s[e],s}})},v=async e=>{if(e.target.files&&a){let t=e.target.files,l={...s};for(let e=0;e<t.length;e++){let s=t[e],n=JSON.parse(JSON.stringify(a)),r=s.name,o=s.name,i=s.name.split(".").pop()||"",c=await function(e){return new Promise((t,s)=>{let l=new FileReader;l.onload=()=>{t(function(e){let t="",s=new Uint8Array(e),l=s.byteLength;for(let e=0;e<l;e++)t+=String.fromCharCode(s[e]);return btoa(t)}(l.result))},l.onerror=()=>s(l.error),l.readAsArrayBuffer(e)})}(s);l[o]={fileID:o,filename:r,extension:i,status_report:{},source:"",isURL:!1,overwrite:!1,content:c,labels:["Document"],rag_config:n,file_size:N(c),status:"READY"}}r(l),x(t[0].name),e.target.value=""}},j=e=>{if(a){let t={...s},l=JSON.parse(JSON.stringify(a));l.Reader.selected=e;let n=new Date().toISOString();t[n]={fileID:n,filename:n,status_report:{},extension:"URL",isURL:!0,source:"",overwrite:!1,content:"",labels:["Document"],rag_config:l,file_size:0,status:"READY"},r(t),x(n)}},N=e=>{let t=e.replace(/\s+/g,"");if(t.length%2!=0)throw Error("Invalid hex string length.");return t.length/2};return(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,l.jsx)(G,{settingConfig:t,tooltip_text:"Upload your data through this interface into Verba. You can select individual files, directories or add URL to fetch data from.",display_text:"File Selection"})}),(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,l.jsxs)("button",{onClick:()=>{var e;return null===(e=document.getElementById("files_upload"))||void 0===e?void 0:e.click()},className:"flex border-none btn text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,l.jsx)(o.Lgw,{size:15}),(0,l.jsx)("p",{children:"Add Files"})]}),(0,l.jsx)("input",{id:"files_upload",type:"file",onChange:v,className:"hidden",multiple:!0}),(0,l.jsxs)("button",{onClick:()=>{var e;return null===(e=document.getElementById("dir_upload"))||void 0===e?void 0:e.click()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,l.jsx)(ep.Lec,{size:15}),(0,l.jsx)("p",{children:"Add Directory"})]}),(0,l.jsx)("input",{id:"dir_upload",type:"file",ref:h,onChange:v,className:"hidden",multiple:!0}),(0,l.jsxs)("div",{className:"dropdown dropdown-bottom",children:[(0,l.jsxs)("button",{tabIndex:0,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,l.jsx)(o.Lgw,{size:15}),(0,l.jsx)("p",{children:"Add URL"})]}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:a&&Object.entries(a.Reader.components).filter(e=>{let[t,s]=e;return"URL"===s.type}).map(e=>{let[t,s]=e;return(0,l.jsx)("li",{onClick:()=>{j(s.name),ev()},children:(0,l.jsx)("a",{children:s.name})},"URL_"+s.name+t)})})]})]})]}),(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:Object.entries(s).map(e=>{let[t,n]=e;return(0,l.jsx)(ej,{fileData:n,handleDeleteFile:f,selectedFileData:d,setSelectedFileData:x,fileMap:s,setFileMap:r},"FileComponent_"+t)})}),"ONLINE"===u?(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[d&&(0,l.jsxs)("button",{onClick:g,className:"flex btn border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba gap-2",children:[(0,l.jsx)(i.Xur,{size:15}),(0,l.jsx)("p",{children:"Import Selected"})]}),(0,l.jsxs)("button",{onClick:m,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,l.jsx)(i.Xur,{size:15}),(0,l.jsx)("p",{children:"Import All"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("remove_all_files");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,l.jsx)(p.B4e,{size:15}),(0,l.jsx)("p",{children:"Clear Files"})]})]})}):(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,l.jsx)("div",{className:"flex gap-3 justify-end",children:(0,l.jsxs)("button",{onClick:b,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,l.jsx)(en.Nwf,{size:15}),(0,l.jsx)("p",{children:"Reconnect to Verba"})]})})}),(0,l.jsx)(J,{modal_id:"remove_all_files",title:"Clear all files?",text:"Do you want to clear all files from your selection?",triggerString:"Clear All",triggerValue:null,triggerAccept:f})]})},ey=s(67447),ew=s(88033),eC=e=>{var t;let{selectedFileData:s,setSelectedFileData:a,fileMap:c,setFileMap:d}=e,[x,g]=(0,n.useState)(""),[u,b]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[f,v]=(0,n.useState)(!1),[j,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{s&&(c[s].isURL?g(c[s].content?c[s].content:""):g(c[s].filename),b(c[s].source))},[c,s]);let y=e=>{if(s){let t=JSON.parse(JSON.stringify(c[s]));t.overwrite=e;let l={...c};l[s]=t,d(l)}},w=e=>{if(s&&!c[s].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(c[s]));t.labels.push(e);let l={...c};l[s]=t,d(l),h("")}},C=e=>{if(s&&c[s].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(c[s]));t.labels=t.labels.filter(t=>t!==e);let l={...c};l[s]=t,d(l),h("")}};return s?(0,l.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[s&&"READY"!=c[s].status&&(0,l.jsx)("div",{className:"divider  text-text-alt-verba",children:"Import Status"}),(0,l.jsx)("div",{className:"flex flex-col gap-3 text-text-verba",children:s&&Object.entries(c[s].status_report).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsxs)("p",{className:"flex min-w-[8vw] gap-2 items-center text-text-verba",children:["DONE"===s.status&&(0,l.jsx)(i.FJM,{size:15}),"ERROR"===s.status&&(0,l.jsx)(p.vVM,{size:15}),ef[s.status]]}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full ".concat(eh[s.status]," bg-bg-verba"),children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:0!=s.took?s.message+" ("+s.took+"s)":s.message,disabled:!0})})]},"Status"+t)})}),(0,l.jsx)("div",{className:"divider text-text-alt-verba",children:"File Settings"}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[s&&c[s].isURL?(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"URL"}):(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Title"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:x,onChange:e=>{g(e.target.value)},disabled:!f})}),(0,l.jsx)("button",{onClick:()=>{if(f&&s){let e=JSON.parse(JSON.stringify(c[s]));c[s].isURL?e.content=x:e.filename=x;let t={...c};t[s]=e,d(t)}v(e=>!e)},className:"btn btn-square bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:f?(0,l.jsx)(o.jsx,{size:20}):(0,l.jsx)(p.U$P,{size:15})})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Source Link"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:u,onChange:e=>{b(e.target.value)},disabled:!j})}),(0,l.jsx)("button",{onClick:()=>{if(j&&s){let e=JSON.parse(JSON.stringify(c[s]));e.source=u;let t={...c};t[s]=e,d(t)}N(e=>!e)},className:"btn btn-square bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:j?(0,l.jsx)(o.jsx,{size:20}):(0,l.jsx)(p.U$P,{size:15})})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Labels"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:m,onChange:e=>{h(e.target.value)}})}),(0,l.jsx)("button",{onClick:()=>{w(m)},className:"btn btn-square bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:(0,l.jsx)(r.Kth,{size:15})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add or remove labels for Document Filtering"})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.entries((t=c[s]).labels).map(e=>{let[s,n]=e;return(0,l.jsxs)("div",{className:"flex bg-bg-verba min-w-[10vw] p-2 text-sm text-text-verba justify-between items-center rounded-xl",children:[(0,l.jsx)("p",{children:n}),(0,l.jsxs)("button",{onClick:()=>{C(n)},className:"btn btn-sm btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba",children:[" ",(0,l.jsx)(i.Xm5,{size:12})]})]},t.fileID+s+n)})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Overwrite"}),(0,l.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>y(e.target.checked),checked:!!s&&c[s].overwrite})]}),(0,l.jsx)("div",{className:"divider  text-text-alt-verba",children:"File Info"}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Extension"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:c[s].extension,disabled:!0})})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"File Size"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,t)).toFixed(2)," ").concat(["B","KB","MB","GB","TB"][t])})(c[s].file_size),disabled:!0})})]}),(0,l.jsx)("div",{className:"divider  text-text-alt-verba",children:"Ingestion Pipeline"}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Reader"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:c[s].rag_config.Reader.selected,disabled:!0})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:s&&c[s].rag_config.Reader.components[c[s].rag_config.Reader.selected].description})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Chunker"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:c[s].rag_config.Chunker.selected,disabled:!0})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:s&&c[s].rag_config.Chunker.components[c[s].rag_config.Chunker.selected].description})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Embedder"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:c[s].rag_config.Embedder.selected,disabled:!0})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:s&&c[s].rag_config.Embedder.components[c[s].rag_config.Embedder.selected].description})]}),(0,l.jsx)("div",{className:"divider"}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Debug"}),(0,l.jsx)("button",{onClick:()=>{let e=document.getElementById("File_Debug_Modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn btn-square bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:(0,l.jsx)(ew.ZWp,{size:15})})]}),(0,l.jsx)("dialog",{id:"File_Debug_Modal",className:"modal",children:(0,l.jsxs)("div",{className:"modal-box min-w-fit",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:"Debugging File Configuration"}),(0,l.jsx)("pre",{className:"whitespace-pre-wrap",children:s?(()=>{let e={...c[s]};return e.content="File Content",JSON.stringify(e,null,2)})():""}),(0,l.jsx)("div",{className:"modal-action",children:(0,l.jsx)("form",{method:"dialog",children:(0,l.jsx)("button",{className:"btn text-text-verba bg-warning-verba border-none hover:bg-button-hover-verba ml-2",children:"Close"})})})]})})]}):(0,l.jsx)("div",{})},eS=e=>{let{selectedFileData:t,fileMap:s,setFileMap:n,component_name:r}=e,a=(e,s)=>{n(l=>{if(t){let n=JSON.parse(JSON.stringify(l[t])),a={...l};return a[t].rag_config[r].components[a[t].rag_config[r].selected].config[e].value=s,a[t]=n,a}return l})},o=e=>{n(s=>{if(t){let l=JSON.parse(JSON.stringify(s[t])),n=JSON.parse(JSON.stringify(s[t].rag_config));n[r].selected=e,l.rag_config=n;let a={...s};return a[t]=l,a}return s})};return t?(0,l.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[(0,l.jsx)("div",{className:"divider text-text-alt-verba",children:r}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:r}),(0,l.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,l.jsxs)("button",{tabIndex:0,role:"button",className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,l.jsx)(ep.WMq,{size:15}),(0,l.jsx)("p",{children:s[t].rag_config[r].selected})]}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow",children:"Reader"!=r?Object.entries(s[t].rag_config[r].components).map(e=>{let[t,s]=e;return(0,l.jsx)("li",{onClick:()=>{o(s.name),ev()},children:(0,l.jsx)("a",{children:s.name})},"ComponentDropdown_"+s.name)}):function(e,t){let s=t?"URL":"FILE";return Object.entries(e[r].components).filter(e=>{let[t,l]=e;return l.type===s}).map(e=>{let[t,s]=e;return(0,l.jsx)("li",{onClick:()=>{o(s.name),ev()},children:(0,l.jsx)("a",{children:s.name})},"FilteredDropdown_"+s.name)})}(s[t].rag_config,s[t].isURL)})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:t&&s[t].rag_config[r].components[s[t].rag_config[r].selected].description})]}),t&&Object.entries(s[t].rag_config[r].components[s[t].rag_config[r].selected].config).map(e=>{var n;let[o,i]=e;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:o}),"dropdown"===i.type?(0,l.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,l.jsxs)("button",{tabIndex:0,role:"button",className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,l.jsx)(ep.WMq,{size:15}),(0,l.jsx)("p",{children:i.value})]}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow",children:(n=s[t].rag_config)[r].components[n[r].selected].config[o].values.map(e=>(0,l.jsx)("li",{onClick:()=>{a(o,e),ev()},children:(0,l.jsx)("a",{children:e})},"ConfigValue"+e))})]}):(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:i.type,className:"grow w-full",value:i.value,onChange:e=>{a(o,e.target.value)}})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:i.description})]})]},"Configuration"+o+r)})]}):(0,l.jsx)("div",{})},e_=e=>{let{settingConfig:t,selectedFileData:s,fileMap:a,setFileMap:o,RAGConfig:c,setRAGConfig:d,setSelectedFileData:x,APIHost:g}=e,[u,b]=(0,n.useState)("Basic"),m=async()=>{s&&d(a[s].rag_config)};return(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,l.jsx)(G,{settingConfig:t,tooltip_text:"Configure all import settings related to chunking, embedding, adding meta data and more. You can save made changes individually or apply them to all other files",display_text:"Import Config"})}),(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,l.jsxs)("button",{onClick:()=>{b("Basic")},className:"flex ".concat("Basic"===u?"bg-primary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-button-hover-verba"," border-none btn text-text-verba gap-2"),children:[(0,l.jsx)(r.zfW,{size:15}),(0,l.jsx)("p",{children:"Overview"})]}),(0,l.jsxs)("button",{onClick:()=>{b("Pipeline")},className:"flex ".concat("Pipeline"===u?"bg-primary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-button-hover-verba"," border-none btn text-text-verba gap-2"),children:[(0,l.jsx)(i.KOq,{size:15}),(0,l.jsx)("p",{children:"Pipeline"})]}),(0,l.jsx)("button",{onClick:()=>{x(null)},className:"flex btn btn-square border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:(0,l.jsx)(p.B4e,{size:15})})]})]}),(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:["Basic"===u&&(0,l.jsx)(eC,{selectedFileData:s,setSelectedFileData:x,fileMap:a,setFileMap:o}),"Pipeline"===u&&(0,l.jsxs)("div",{className:"flex flex-col gap-10 w-full",children:[(0,l.jsx)(eS,{selectedFileData:s,fileMap:a,setFileMap:o,component_name:"Reader"}),(0,l.jsx)(eS,{selectedFileData:s,fileMap:a,setFileMap:o,component_name:"Chunker"}),(0,l.jsx)(eS,{selectedFileData:s,fileMap:a,setFileMap:o,component_name:"Embedder"})]})]}),(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("apply_setting_to_all");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba gap-2",children:[(0,l.jsx)(ey.HL_,{size:15}),(0,l.jsx)("p",{children:"Apply to All"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("set_default_settings");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,l.jsx)(r.zfW,{size:15}),(0,l.jsx)("p",{children:"Set as Default"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_Setting");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,l.jsx)(p.B4e,{size:15}),(0,l.jsx)("p",{children:"Reset"})]})]})}),(0,l.jsx)(J,{modal_id:"apply_setting_to_all",title:"Apply Pipeline Settings",text:"Apply Pipeline Settings to all files?",triggerString:"Apply",triggerValue:null,triggerAccept:()=>{o(e=>{if(s){let t=JSON.parse(JSON.stringify(e[s].rag_config)),l={...e};for(let n in e){let r=JSON.parse(JSON.stringify(e[n]));r.rag_config=t,r.source=e[s].source,r.labels=e[s].labels,r.overwrite=e[s].overwrite,l[n]=r}return l}return e})}}),(0,l.jsx)(J,{modal_id:"reset_Setting",title:"Reset Setting",text:"Reset pipeline settings of this file?",triggerString:"Reset",triggerValue:null,triggerAccept:()=>{o(e=>{if(s&&c){let t={...e},l=JSON.parse(JSON.stringify(e[s]));return l.rag_config=c,t[s]=l,t}return e})}}),(0,l.jsx)(J,{modal_id:"set_default_settings",title:"Set Default",text:"Set current pipeline settings as default for future files?",triggerString:"Set",triggerValue:null,triggerAccept:m})]})},eE=e=>{let{settingConfig:t,RAGConfig:s,setRAGConfig:r,setReconnectMain:a,APIHost:o}=e,[i,c]=(0,n.useState)({}),[d,x]=(0,n.useState)(null),[g,u]=(0,n.useState)(!1),[b,m]=(0,n.useState)(null),[h,f]=(0,n.useState)("OFFLINE");(0,n.useEffect)(()=>{u(!0)},[]),(0,n.useEffect)(()=>{let e=eu(),t=new WebSocket(e);return t.onopen=()=>{console.log("Import WebSocket connection opened to "+e),f("ONLINE")},t.onmessage=e=>{f("ONLINE");try{let t=JSON.parse(e.data);p(t)}catch(t){console.error("Received data is not valid JSON:",e.data);return}},t.onerror=e=>{console.error("Import WebSocket Error:",e),f("OFFLINE")},t.onclose=e=>{f("OFFLINE"),e.wasClean?console.log("Import WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died")},m(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[g]);let p=e=>{c(t=>{if(e&&e.fileID in t){let s=JSON.parse(JSON.stringify(t[e.fileID])),l={...t};return s.status=e.status,s.status_report[e.status]=e,l[e.fileID]=s,l}return t})},v=e=>{c(t=>{if(e in t){let s=JSON.parse(JSON.stringify(t[e])),l={...t};return s.status="WAITING",Object.entries(s.status_report).length>0&&(s.status_report={}),l[e]=s,l}return t})};return(0,l.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,l.jsx)("div",{className:"".concat(d?"hidden lg:flex lg:w-[45vw]":"w-full lg:w-[45vw] lg:flex"),children:(0,l.jsx)(eN,{settingConfig:t,fileMap:i,setFileMap:c,RAGConfig:s,setRAGConfig:r,selectedFileData:d,setSelectedFileData:x,importSelected:()=>{d&&["READY","DONE","ERROR"].includes(i[d].status)&&((null==b?void 0:b.readyState)===WebSocket.OPEN?(v(d),b.send(JSON.stringify(i[d]))):(console.error("WebSocket is not open. ReadyState:",null==b?void 0:b.readyState),u(e=>!e)))},importAll:()=>{for(let e in i)["READY","DONE","ERROR"].includes(i[e].status)&&((null==b?void 0:b.readyState)===WebSocket.OPEN?(v(e),b.send(JSON.stringify(i[e]))):(console.error("WebSocket is not open. ReadyState:",null==b?void 0:b.readyState),u(e=>!e)))},socketStatus:h,reconnect:()=>{u(e=>!e),a(e=>!e)}})}),(0,l.jsx)("div",{className:"".concat(d?"lg:w-[55vw] w-full flex":"hidden lg:flex lg:w-[55vw]"),children:d&&"ONLINE"===h&&(0,l.jsx)(e_,{settingConfig:t,selectedFileData:d,RAGConfig:s,APIHost:o,setRAGConfig:r,fileMap:i,setFileMap:c,setSelectedFileData:x})})]})},ek=s(9881);function eI(){var e;let[t,s]=(0,n.useState)("CHAT"),[r,a]=(0,n.useState)(!1),[o,i]=(0,n.useState)(""),[c,d]=(0,n.useState)("Default"),[x,g]=(0,n.useState)(null),b=x?x[c].Customization.settings.font.value:null,m=b&&(null===(e=Z[b])||void 0===e?void 0:e.className)||"",[h,p]=(0,n.useState)(null),[v,j]=(0,n.useState)(!1),[N,y]=(0,n.useState)(null),w=async()=>{try{let e=await em();if(y(e),e)try{let t=await fetch(e+"/api/health",{method:"GET"}),s=await t.json();s?(a(s.production),i(s.gtag)):console.warn("Could not retrieve health data");let l=await fetch(e+"/api/config",{method:"GET"}),n=await l.json();n?(n.error&&console.error(n.error),n.data.RAG&&p(n.data.RAG),n.data.SETTING.themes?(g(n.data.SETTING.themes),d(n.data.SETTING.selectedTheme)):(g(f),d("Default"))):console.warn("Configuration could not be retrieved")}catch(e){console.error("Failed to fetch configuration:",e),p(null)}}catch(e){console.error("Error detecting host:",e),y(null)}};(0,n.useEffect)(()=>{j(!0)},[]),(0,n.useEffect)(()=>{w()},[v]);let C=async()=>{if(N&&x)try{await fetch(N+"/api/set_config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:{RAG:h,SETTING:{selectedTheme:c,themes:x}}})})}catch(e){console.error("Failed to update config:",e)}};return(0,n.useEffect)(()=>{C()},[x,c,h]),(0,n.useEffect)(()=>{x&&(document.documentElement.style.setProperty("--primary-verba",x[c].Customization.settings.primary_color.color),document.documentElement.style.setProperty("--secondary-verba",x[c].Customization.settings.secondary_color.color),document.documentElement.style.setProperty("--warning-verba",x[c].Customization.settings.warning_color.color),document.documentElement.style.setProperty("--bg-verba",x[c].Customization.settings.bg_color.color),document.documentElement.style.setProperty("--bg-alt-verba",x[c].Customization.settings.bg_alt_color.color),document.documentElement.style.setProperty("--text-verba",x[c].Customization.settings.text_color.color),document.documentElement.style.setProperty("--text-alt-verba",x[c].Customization.settings.text_alt_color.color),document.documentElement.style.setProperty("--button-verba",x[c].Customization.settings.button_color.color),document.documentElement.style.setProperty("--button-hover-verba",x[c].Customization.settings.button_hover_color.color),document.documentElement.style.setProperty("--bg-console-verba",x[c].Customization.settings.bg_console.color),document.documentElement.style.setProperty("--text-console-verba",x[c].Customization.settings.text_console.color))},[x,c]),(0,l.jsxs)("main",{className:"min-h-screen p-5 bg-bg-verba text-text-verba ".concat(m),"data-theme":x?x[c].Customization.settings.theme:"light",children:[""!==o&&(0,l.jsx)(ek.GoogleAnalytics,{gaId:o}),x?(0,l.jsxs)("div",{children:[(0,l.jsx)(u,{APIHost:N,production:r,handleViewChange:s,title:x[c].Customization.settings.title.text,subtitle:x[c].Customization.settings.subtitle.text,imageSrc:x[c].Customization.settings.image.src,version:"v2.0.0",currentPage:t,setCurrentPage:s}),(0,l.jsx)("div",{className:"".concat("CHAT"!==t||r?"hidden":""),children:(0,l.jsx)($,{production:r,settingConfig:x[c],APIHost:N,RAGConfig:h,setCurrentPage:s})}),(0,l.jsx)("div",{className:"".concat("DOCUMENTS"!==t||r?"hidden":""),children:(0,l.jsx)(eo,{RAGConfig:h,production:r,setCurrentPage:s,settingConfig:x[c],APIHost:N})}),"STATUS"===t&&!r&&(0,l.jsx)(ex,{fetchHost:w,settingConfig:x[c],APIHost:N}),(0,l.jsx)("div",{className:"".concat("ADD"!==t||r?"hidden":""),children:(0,l.jsx)(eE,{settingConfig:x[c],RAGConfig:h,setRAGConfig:p,APIHost:N,setReconnectMain:j})}),"RAG"===t&&!r&&(0,l.jsx)(eb,{baseSetting:x,settingTemplate:c,buttonTitle:"Save",settingConfig:x[c],APIHost:N,RAGConfig:h,setRAGConfig:p,setCurrentPage:s,showComponents:["Embedder","Retriever","Generator"]}),"SETTINGS"===t&&!r&&(0,l.jsx)(E,{settingTemplate:c,setSettingTemplate:d,baseSetting:x,setBaseSetting:g})]}):(0,l.jsxs)("div",{className:"flex items-center justify-center h-screen gap-2",children:[(0,l.jsx)(I(),{loading:!0,size:12,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Loading Verba"})]}),(0,l.jsx)("footer",{className:"footer footer-center p-4 mt-8 bg-bg-verba text-text-alt-verba",children:(0,l.jsx)("aside",{children:(0,l.jsx)("p",{children:"Build with ♥ and Weaviate \xa9 2024"})})}),(0,l.jsx)("img",{referrerPolicy:"no-referrer-when-downgrade",src:"https://static.scarf.sh/a.png?x-pxid=ec666e70-aee5-4e87-bc62-0935afae63ac"})]})}}},function(e){e.O(0,[429,689,520,465,582,33,190,400,982,682,420,636,712,493,971,23,744],function(){return e(e.s=87094)}),_N_E=e.O()}]);